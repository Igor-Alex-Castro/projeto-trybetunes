{"ast":null,"code":"import _regeneratorRuntime from\"/home/igor/Documentos/ProjetosPessoais/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/igor/Documentos/ProjetosPessoais/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/igor/Documentos/ProjetosPessoais/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/igor/Documentos/ProjetosPessoais/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/igor/Documentos/ProjetosPessoais/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/igor/Documentos/ProjetosPessoais/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/igor/Documentos/ProjetosPessoais/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{addSong,removeSong}from'../services/favoriteSongsAPI';import Loading from'../pages/loading/Loading';import'./musicaCard.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MusicCard=/*#__PURE__*/function(_React$Component){_inherits(MusicCard,_React$Component);var _super=_createSuper(MusicCard);function MusicCard(props){var _this;_classCallCheck(this,MusicCard);_this=_super.call(this,props);_this.state={isFaforite:false};_this.onChangeInput=_this.onChangeInput.bind(_assertThisInitialized(_this));_this.addFavoritos=_this.addFavoritos.bind(_assertThisInitialized(_this));return _this;}_createClass(MusicCard,[{key:\"componentDidMount\",value:function componentDidMount(){var favorito=this.props.favorito;if(favorito){this.setState({isFaforite:true});}}},{key:\"onChangeInput\",value:function onChangeInput(_ref){var _this2=this;var target=_ref.target;var checked=target.checked;this.setState({isFaforite:checked},function(){return _this2.addFavoritos();});}},{key:\"addFavoritos\",value:function(){var _addFavoritos=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var isFaforite,_this$props,id,atualizaSong,isAlbum;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isFaforite=this.state.isFaforite;_this$props=this.props,id=_this$props.id,atualizaSong=_this$props.atualizaSong,isAlbum=_this$props.isAlbum;console.log(event);if(!isFaforite){_context.next=8;break;}this.setState({isLoading:true});_context.next=7;return addSong(id);case 7:this.setState({isLoading:false});case 8:if(isFaforite){_context.next=16;break;}this.setState({isLoading:true});_context.next=12;return removeSong(id);case 12:this.setState({isLoading:false});if(isAlbum){_context.next=16;break;}_context.next=16;return atualizaSong();case 16:case\"end\":return _context.stop();}}},_callee,this);}));function addFavoritos(_x){return _addFavoritos.apply(this,arguments);}return addFavoritos;}()},{key:\"render\",value:function render(){var _this$props2=this.props,previewUrl=_this$props2.previewUrl,trackName=_this$props2.trackName,trackId=_this$props2.trackId;var _this$state=this.state,isLoading=_this$state.isLoading,isFaforite=_this$state.isFaforite;return/*#__PURE__*/_jsx(\"div\",{className:\"musicas\",children:isLoading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"musicasAdio\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"track-name\",children:trackName}),/*#__PURE__*/_jsxs(\"audio\",{\"data-testid\":\"audio-component\",src:previewUrl,preload:\"auto\",id:\"plyaer\",controls:true,children:[/*#__PURE__*/_jsx(\"track\",{kind:\"captions\"}),\"O seu navegador n\\xE3o suporta o elemento\",/*#__PURE__*/_jsx(\"code\",{children:\"audio\"})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:trackId,className:\"label-check-box\",children:[\"Favorita\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:trackId,\"data-testid\":\"checkbox-music-\".concat(trackId),className:\"check-box chk\",checked:isFaforite,atualizaSong:this.atualizaSong,onChange:this.onChangeInput})]})]})});}}]);return MusicCard;}(React.Component);export default MusicCard;","map":{"version":3,"sources":["/home/igor/Documentos/ProjetosPessoais/TrybeTunes/src/components/MusicCard.js"],"names":["React","addSong","removeSong","Loading","MusicCard","props","state","isFaforite","onChangeInput","bind","addFavoritos","favorito","setState","target","checked","event","id","atualizaSong","isAlbum","console","log","isLoading","previewUrl","trackName","trackId","Component"],"mappings":"qpCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,8BAApC,CACA,MAAOC,CAAAA,OAAP,KAAoB,0BAApB,CACA,MAAO,kBAAP,C,2FAEMC,CAAAA,S,kHACJ,mBAAYC,KAAZ,CAAmB,2CACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,UAAU,CAAE,KADD,CAAb,CAGA,MAAKC,aAAL,CAAqB,MAAKA,aAAL,CAAmBC,IAAnB,+BAArB,CACA,MAAKC,YAAL,CAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB,CANiB,aAOlB,C,uDAED,4BAAoB,CAClB,GAAQE,CAAAA,QAAR,CAAqB,KAAKN,KAA1B,CAAQM,QAAR,CACA,GAAIA,QAAJ,CAAc,CACZ,KAAKC,QAAL,CAAc,CACZL,UAAU,CAAE,IADA,CAAd,EAGD,CACF,C,6BAED,4BAA0B,oBAAVM,CAAAA,MAAU,MAAVA,MAAU,CACxB,GAAQC,CAAAA,OAAR,CAAoBD,MAApB,CAAQC,OAAR,CACA,KAAKF,QAAL,CAAc,CACZL,UAAU,CAAEO,OADA,CAAd,CAEG,iBAAM,CAAA,MAAI,CAACJ,YAAL,EAAN,EAFH,EAGD,C,iHAED,iBAAmBK,KAAnB,qKACUR,UADV,CACyB,KAAKD,KAD9B,CACUC,UADV,aAEwC,KAAKF,KAF7C,CAEUW,EAFV,aAEUA,EAFV,CAEcC,YAFd,aAEcA,YAFd,CAE4BC,OAF5B,aAE4BA,OAF5B,CAGEC,OAAO,CAACC,GAAR,CAAYL,KAAZ,EAHF,IAIMR,UAJN,yBAKI,KAAKK,QAAL,CAAc,CAAES,SAAS,CAAE,IAAb,CAAd,EALJ,sBAMUpB,CAAAA,OAAO,CAACe,EAAD,CANjB,QAOI,KAAKJ,QAAL,CAAc,CAAES,SAAS,CAAE,KAAb,CAAd,EAPJ,UASOd,UATP,0BAUI,KAAKK,QAAL,CAAc,CAAES,SAAS,CAAE,IAAb,CAAd,EAVJ,uBAWUnB,CAAAA,UAAU,CAACc,EAAD,CAXpB,SAYI,KAAKJ,QAAL,CAAc,CAAES,SAAS,CAAE,KAAb,CAAd,EAZJ,GAaSH,OAbT,iDAcYD,CAAAA,YAAY,EAdxB,6D,sHAmBA,iBAAS,CACP,iBAA2C,KAAKZ,KAAhD,CAAQiB,UAAR,cAAQA,UAAR,CAAoBC,SAApB,cAAoBA,SAApB,CAA+BC,OAA/B,cAA+BA,OAA/B,CACA,gBAAkC,KAAKlB,KAAvC,CAAQe,SAAR,aAAQA,SAAR,CAAmBd,UAAnB,aAAmBA,UAAnB,CACA,mBACE,YAAK,SAAS,CAAC,SAAf,UACIc,SAAS,cACN,KAAC,OAAD,IADM,cAIP,aAAK,SAAS,CAAC,aAAf,wBACE,UAAG,SAAS,CAAC,YAAb,UAA2BE,SAA3B,EADF,cAGE,eACE,cAAY,iBADd,CAEE,GAAG,CAAGD,UAFR,CAGE,OAAO,CAAC,MAHV,CAIE,EAAE,CAAC,QAJL,CAKE,QAAQ,KALV,wBAOE,cAAO,IAAI,CAAC,UAAZ,EAPF,0DASE,+BATF,GAHF,cAcE,eAAO,OAAO,CAAGE,OAAjB,CAA2B,SAAS,CAAC,iBAArC,mCAEE,cACE,IAAI,CAAC,UADP,CAEE,EAAE,CAAGA,OAFP,CAGE,uCAAgCA,OAAhC,CAHF,CAIE,SAAS,CAAC,eAJZ,CAKE,OAAO,CAAGjB,UALZ,CAME,YAAY,CAAG,KAAKU,YANtB,CAOE,QAAQ,CAAG,KAAKT,aAPlB,EAFF,GAdF,GALN,EADF,CAoCD,C,uBApFqBR,KAAK,CAACyB,S,EA+F9B,cAAerB,CAAAA,SAAf","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from '../pages/loading/Loading';\nimport './musicaCard.css';\n\nclass MusicCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFaforite: false,\n    };\n    this.onChangeInput = this.onChangeInput.bind(this);\n    this.addFavoritos = this.addFavoritos.bind(this);\n  }\n\n  componentDidMount() {\n    const { favorito } = this.props;\n    if (favorito) {\n      this.setState({\n        isFaforite: true,\n      });\n    }\n  }\n\n  onChangeInput({ target }) {\n    const { checked } = target;\n    this.setState({\n      isFaforite: checked,\n    }, () => this.addFavoritos());\n  }\n\n  async addFavoritos(event) {\n    const { isFaforite } = this.state;\n    const { id, atualizaSong, isAlbum } = this.props;\n    console.log(event);\n    if (isFaforite) {\n      this.setState({ isLoading: true });\n      await addSong(id);\n      this.setState({ isLoading: false });\n    }\n    if (!isFaforite) {\n      this.setState({ isLoading: true });\n      await removeSong(id);\n      this.setState({ isLoading: false });\n      if (!isAlbum) {\n        await atualizaSong();\n      }\n    }\n  }\n\n  render() {\n    const { previewUrl, trackName, trackId } = this.props;\n    const { isLoading, isFaforite } = this.state;\n    return (\n      <div className=\"musicas\">\n        { isLoading\n          ? (<Loading />)\n          : (\n\n            <div className=\"musicasAdio\">\n              <p className=\"track-name\">{trackName}</p>\n\n              <audio\n                data-testid=\"audio-component\"\n                src={ previewUrl }\n                preload=\"auto\"\n                id=\"plyaer\"\n                controls\n              >\n                <track kind=\"captions\" />\n                O seu navegador n√£o suporta o elemento\n                <code>audio</code>\n              </audio>\n              <label htmlFor={ trackId } className=\"label-check-box\">\n                Favorita\n                <input\n                  type=\"checkbox\"\n                  id={ trackId }\n                  data-testid={ `checkbox-music-${trackId}` }\n                  className=\"check-box chk\"\n                  checked={ isFaforite }\n                  atualizaSong={ this.atualizaSong }\n                  onChange={ this.onChangeInput }\n                />\n              </label>\n            </div>\n          )}\n      </div>\n    );\n  }\n}\nMusicCard.propTypes = {\n  previewUrl: PropTypes.string.isRequired,\n  trackName: PropTypes.string.isRequired,\n  trackId: PropTypes.number.isRequired,\n  favorito: PropTypes.bool.isRequired,\n  id: PropTypes.shape().isRequired,\n  atualizaSong: PropTypes.func.isRequired,\n  isAlbum: PropTypes.bool.isRequired,\n};\nexport default MusicCard;\n"]},"metadata":{},"sourceType":"module"}