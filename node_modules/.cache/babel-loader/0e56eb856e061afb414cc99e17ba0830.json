{"ast":null,"code":"var _jsxFileName = \"/home/igor/projetos-trybe/sd-020-b-project-trybetunes/src/pages/Search.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../componentes/Header';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport Carregando from '../componentes/Carregando';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Search extends React.Component {\n  // requisito 5\n  constructor() {\n    super();\n    this.handleChange = this.handleChange.bind(this);\n    this.botaoSalvar = this.botaoSalvar.bind(this);\n    this.state = {\n      // criando o estado do button\n      nome: '',\n      array: [],\n      resultado: '',\n      desabilitar: true,\n      loading: false,\n      frase: '',\n      statusFrase: false\n    };\n  } // mesma logica do componente login, muda valor da variavel ^ v\n\n\n  handleChange(event) {\n    // função para habilitar o botão apenas se receber valor acima de 2\n    const minValor = 2;\n    const {\n      nome\n    } = this.state;\n    this.setState({\n      nome: event.target.value\n    }, () => {\n      this.setState({\n        desabilitar: nome.length <= minValor\n      }); // muda o estado do botão depois das 2 letras\n    });\n  }\n\n  async botaoSalvar() {\n    // requisito 6\n    const {\n      nome\n    } = this.state;\n    this.setState(() => ({\n      loading: true\n    }), async () => {\n      await searchAlbumsAPI(nome).then(e => {\n        // requisição searchAlbumAPI\n        if (e.length > 0) {\n          this.setState({\n            loading: false,\n            array: e,\n            resultado: nome,\n            nome: ''\n          });\n        } else {\n          this.setState({\n            frase: 'Nenhum álbum foi encontrado',\n            statusFrase: true,\n            loading: false\n          });\n        }\n      });\n    });\n  }\n\n  render() {\n    // form requisito 5 - restante requisito 6\n    const {\n      desabilitar,\n      loading,\n      frase,\n      statusFrase,\n      array,\n      nome,\n      resultado\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-search\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            \"data-testid\": \"search-artist-input\",\n            name: \"nome\",\n            type: \"text\",\n            onChange: this.handleChange,\n            value: nome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          \"data-testid\": \"search-artist-button\",\n          type: \"button\",\n          onClick: this.botaoSalvar,\n          disabled: desabilitar,\n          children: \"Pesquisar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), statusFrase && frase, loading && /*#__PURE__*/_jsxDEV(Carregando, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), array.length > 0 && /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: `Resultado de álbuns de: ${resultado}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 30\n      }, this), array.length > 0 && array.map((e, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: e.collectionName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: e.artistName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: e.artworkUrl100,\n          alt: e.collectionName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          \"data-testid\": `link-to-album-${e.collectionId}`,\n          to: `/album/${e.collectionId}`,\n          children: e.collectionId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/home/igor/projetos-trybe/sd-020-b-project-trybetunes/src/pages/Search.js"],"names":["React","Link","Header","searchAlbumsAPI","Carregando","Search","Component","constructor","handleChange","bind","botaoSalvar","state","nome","array","resultado","desabilitar","loading","frase","statusFrase","event","minValor","setState","target","value","length","then","e","render","map","index","collectionName","artistName","artworkUrl100","collectionId"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../componentes/Header';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport Carregando from '../componentes/Carregando';\n\nclass Search extends React.Component {// requisito 5\n  constructor() {\n    super();\n    this.handleChange = this.handleChange.bind(this);\n    this.botaoSalvar = this.botaoSalvar.bind(this);\n\n    this.state = { // criando o estado do button\n      nome: '',\n      array: [],\n      resultado: '',\n      desabilitar: true,\n      loading: false,\n      frase: '',\n      statusFrase: false,\n    };\n  }\n\n  // mesma logica do componente login, muda valor da variavel ^ v\n  handleChange(event) { // função para habilitar o botão apenas se receber valor acima de 2\n    const minValor = 2;\n    const { nome } = this.state;\n    this.setState({ nome: event.target.value }, () => {\n      this.setState({ desabilitar: nome.length <= minValor });// muda o estado do botão depois das 2 letras\n    });\n  }\n\n  async botaoSalvar() { // requisito 6\n    const { nome } = this.state;\n    this.setState(() => ({ loading: true }), async () => {\n      await searchAlbumsAPI(nome).then((e) => { // requisição searchAlbumAPI\n        if (e.length > 0) {\n          this.setState({\n            loading: false,\n            array: e,\n            resultado: nome,\n            nome: '' });\n        } else {\n          this.setState({\n            frase: 'Nenhum álbum foi encontrado',\n            statusFrase: true,\n            loading: false });\n        }\n      });\n    });\n  }\n\n  render() { // form requisito 5 - restante requisito 6\n    const {\n      desabilitar,\n      loading,\n      frase,\n      statusFrase,\n      array,\n      nome,\n      resultado } = this.state;\n    return (\n\n      <div data-testid=\"page-search\">\n        <h2>Search</h2>\n        <Header />\n        <form>\n          <label htmlFor=\"name\">\n            <input\n              data-testid=\"search-artist-input\"\n              name=\"nome\"\n              type=\"text\"\n              onChange={ this.handleChange }\n              value={ nome }\n            />\n          </label>\n\n          <button\n            data-testid=\"search-artist-button\"\n            type=\"button\"\n            onClick={ this.botaoSalvar }\n            disabled={ desabilitar }\n          >\n            Pesquisar\n          </button>\n\n        </form>\n        {/* {requisito - 6} */}\n        {/* { se o statusFrase for verdadeiro aciona a frase 'Nenhum álbum foi encontrado'} */}\n        {statusFrase && frase}\n        {/* {se loading for verdadeiro componente Carregando é acionado} */}\n        {loading && <Carregando />}\n        {/* {se o tamanho do array for maior que dois, aparece a frase com o nome do artista} */}\n        {array.length > 0 && <h2>{`Resultado de álbuns de: ${resultado}`}</h2>}\n        {/* {faz um map no array p encontrar o valor de busca} */}\n        {array.length > 0 && array.map((e, index) => (\n          <div key={ index }>\n            <h4>{ e.collectionName }</h4>\n            <p>{ e.artistName }</p>\n            <img src={ e.artworkUrl100 } alt={ e.collectionName } />\n            {/* {link para ser redirecionado p album/id} */}\n            <Link\n              data-testid={ `link-to-album-${e.collectionId}` }\n              to={ `/album/${e.collectionId}` }\n            >\n              {e.collectionId}\n            </Link>\n\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}